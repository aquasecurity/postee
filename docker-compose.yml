version: "3"
services:
    postee:
        container_name: postee
        build:
            context: .
            dockerfile: Dockerfile
        ports:
            - 8082:8082
        volumes:
            - bolt:/server/database
            - config:/config
        environment:
            - "POSTEE_CFG=/config/cfg.yaml"
            - "POSTEE_DEBUG=ON"
    posteeui:
        depends_on:
            - postee
        container_name: postee-ui
        build:
            context: .
            dockerfile: Dockerfile.ui
        ports:
            - 8001:8001
        volumes:
            - bolt:/server/database
            - config:/config
        environment:
            - "POSTEE_UI_CFG=/config/cfg.yaml"
            - "POSTEE_UI_PORT=8001"
            - "POSTEE_UI_UPDATE_URL=http://postee:8082"
volumes:
  bolt:
  config: